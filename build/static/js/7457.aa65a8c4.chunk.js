"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[7457],{2023:(e,t,n)=>{n.d(t,{A:()=>a});n(5043);var o=n(6240),s=n(7392),i=n(9120),r=n(579);const a=function(){const e=(0,o.A)();return(0,r.jsx)("div",{style:{display:"flex",justifyContent:"start"},children:(0,r.jsxs)(s.A,{variant:"contained",sx:{color:e.palette.common.white,width:"max-content",backgroundColor:e.palette.error.main,"&:hover":{backgroundColor:e.palette.error.main}},onClick:()=>window.history.back(),children:[(0,r.jsx)(i.A,{})," "]})})}},3903:(e,t,n)=>{n.d(t,{A:()=>s});n(5043);var o=n(579);const s=function(e){let{label:t,value:n,...s}=e;return(0,o.jsxs)("div",{...s,children:[(0,o.jsx)("div",{style:{padding:"0.5rem 0px",color:"#083344",borderRadius:"5px",border:"none"},children:(i=t,i.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "))}),(0,o.jsx)("div",{style:{padding:"0.5rem 1rem",backgroundColor:"#f4f6f8",borderRadius:"5px",border:"none"},children:n||"Not Set"})]});var i}},9841:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var o=n(5043),s=n(3216),i=n(8903),r=n(2110),a=n(6494),l=n(5865),d=n(6446),c=n(1906),u=n(3903),x=n(3003),v=n(7863),p=n(1944),m=n(1935),h=n(4356),y=n(6240),f=n(2023),j=n(74),g=n.n(j),A=n(8402),C=n(579);const b=function(){var e;const{id:t}=(0,s.g)(),n=(0,y.A)(),[j,b]=(0,o.useState)({}),w=(0,x.wA)(),[_,k]=(0,o.useState)({}),[I,S]=(0,o.useState)([]),N=async()=>{try{var e;w((0,m.vL)());const a=await v.A.get(p.A.PurchseOrders.GET_BY_ID+t);var n,o,s,i,r;if(null!==(e=a.data)&&void 0!==e&&e.payload)b(null===(n=a.data)||void 0===n||null===(o=n.payload)||void 0===o?void 0:o.result),(async e=>{try{var t;w((0,m.vL)());const s=await v.A.get(p.A.Vendors.GET_BY_ID+e);var n,o;null!==(t=s.data)&&void 0!==t&&t.payload&&k(null===(n=s.data)||void 0===n||null===(o=n.payload)||void 0===o?void 0:o.result),w((0,m.xv)())}catch(r){var s,i;(0,h.f1)(null===r||void 0===r||null===(s=r.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.message),w((0,m.xv)())}})(null===(s=a.data)||void 0===s||null===(i=s.payload)||void 0===i||null===(r=i.result)||void 0===r?void 0:r.vendor_id);w((0,m.xv)())}catch(a){console.log(a),w((0,m.xv)())}};return(0,o.useEffect)((()=>{(async()=>{try{var e;const s=new URLSearchParams({pagination:!1}).toString();w((0,m.vL)());const i=await v.A.get(p.A.Products.GET_LIST+"?".concat(s));var t,n,o;null!==(e=i.data)&&void 0!==e&&e.payload&&S(null===(t=i.data)||void 0===t||null===(n=t.payload)||void 0===n||null===(o=n.result)||void 0===o?void 0:o.data),w((0,m.xv)())}catch(s){console.log(s),w((0,m.xv)())}})(),N()}),[t]),(0,C.jsxs)(i.Ay,{container:!0,spacing:2,alignItems:"stretch",justifyContent:"end",children:[(0,C.jsx)(i.Ay,{item:!0,xs:12,sx:{paddingTop:{xs:"0.5rem !important",sx:"0.5rem !important",md:"0px !important"}},children:(0,C.jsx)(f.A,{})}),(0,C.jsx)(i.Ay,{item:!0,xs:12,children:(0,C.jsx)(r.A,{style:{height:"100%",display:"flex",flexDirection:"column"},children:(0,C.jsx)(a.A,{style:{flex:1},children:(0,C.jsxs)(l.A,{variant:"h4",style:{fontWeight:"bold"},children:["Invoice No : ",null===j||void 0===j?void 0:j.invoice_no]})})})}),(0,C.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,C.jsx)(r.A,{style:{height:"100%",display:"flex",flexDirection:"column"},children:(0,C.jsxs)(a.A,{style:{flex:1},children:[(0,C.jsx)(l.A,{variant:"h4",style:{fontWeight:"bold",marginBottom:"0.75rem"},sx:{marginBottom:"0.5rem"},children:"Seller Details"}),(0,C.jsxs)("p",{children:["Name: ",null===_||void 0===_?void 0:_.name]}),(0,C.jsxs)("p",{children:["Address: ",(e=>{if(!e)return"";const{address_line:t,city:n,state:o,pincode:s}=e,i=[];return t&&i.push(t),n&&i.push(n),o&&i.push(o),s&&i.push(s),i.length>0?i.join(", "):""})(null===_||void 0===_?void 0:_.address)]}),(0,C.jsxs)("p",{children:["Email: ",null===_||void 0===_?void 0:_.email]}),(0,C.jsxs)("p",{children:["Phone: ",null===_||void 0===_?void 0:_.contact_number]}),(0,C.jsxs)("p",{children:["GST No.: ",null===_||void 0===_?void 0:_.gst_number]})]})})}),(0,C.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,C.jsx)(r.A,{style:{height:"100%",display:"flex",flexDirection:"column"},children:(0,C.jsxs)(a.A,{style:{flex:1},children:[(0,C.jsx)(l.A,{variant:"h4",style:{fontWeight:"bold",marginBottom:"0.75rem"},sx:{marginBottom:"0.5rem"},children:"Basic Info"}),(0,C.jsxs)(i.Ay,{container:!0,spacing:2,children:[(0,C.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,C.jsx)(u.A,{label:"payment_status",value:(0,A.u)(null===j||void 0===j?void 0:j.payment_status)||"Not Set",disabled:!0})}),(0,C.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,C.jsx)(u.A,{label:"status",value:(0,A.u)(null===j||void 0===j?void 0:j.status)||"Not Set",disabled:!0})}),(0,C.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,C.jsx)(u.A,{label:"advance_payment_amount",value:(null===j||void 0===j?void 0:j.advance_payment_amount)||"0",disabled:!0})}),(0,C.jsx)(i.Ay,{item:!0,xs:12,children:(0,C.jsx)(u.A,{label:"order_notes",value:(null===j||void 0===j?void 0:j.order_notes)||"-",disabled:!0})})]})]})})}),(0,C.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,C.jsx)("div",{style:{width:"100%"},children:(0,C.jsxs)("div",{style:{fontWeight:"bold",color:n.palette.text.primary,display:"flex",justifyContent:"space-between",padding:"15px",backgroundColor:n.palette.background.paper,borderRadius:"10px",boxShadow:n.shadows[1]},children:[(0,C.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:"Item Name"}),(0,C.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:"Product Code"}),(0,C.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:"Man. Date"}),(0,C.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:"Exe. Date"}),(0,C.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:"Quantity"}),(0,C.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:"UoM"}),(0,C.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:"Quantity (in Kg/ Ltr.)"})]})}),(null===j||void 0===j||null===(e=j.products)||void 0===e?void 0:e.length)>0?null===j||void 0===j?void 0:j.products.map(((e,t)=>{var o,s;return(0,C.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"15px",marginTop:"1rem",backgroundColor:n.palette.background.paper,borderRadius:"10px",boxShadow:n.shadows[1]},children:[(0,C.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:null===(o=I.find((t=>t._id===e.product_id)))||void 0===o?void 0:o.product_name}),(0,C.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:null===(s=I.find((t=>t._id===e.product_id)))||void 0===s?void 0:s.product_code}),(0,C.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,A.Yq)(new Date(null===e||void 0===e?void 0:e.manufacture_date))}),(0,C.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,A.Yq)(new Date(null===e||void 0===e?void 0:e.expiry_date))}),(0,C.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:e.quantity}),(0,C.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:e.uom}),(0,C.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:e.final_quantity})]},t)})):(0,C.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:"15px",marginTop:"1rem",backgroundColor:n.palette.background.paper,borderRadius:"10px",boxShadow:n.shadows[1]},children:"No Products Added"})]}),"completed"===(null===j||void 0===j?void 0:j.status)?(0,C.jsx)(i.Ay,{item:!0,xs:12,children:(0,C.jsx)(d.A,{sx:{display:"flex",justifyContent:"flex-end",gap:"1rem"},children:(0,C.jsx)(c.A,{variant:"contained",sx:{color:n.palette.common.white,width:"max-content",backgroundColor:n.palette.success.main,"&:hover":{backgroundColor:n.palette.success.main}},onClick:async()=>{try{w((0,m.vL)());const e=await v.A.get(p.A.PurchseOrders.DOWNLOAD_BILL+t,{responseType:"text"}),n=document.createElement("div");n.innerHTML=e.data;const o={margin:.1,filename:"purchaseInvoice.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}};g()().from(n).set(o).save(),w((0,m.xv)())}catch(e){console.log(e),w((0,m.xv)())}},children:"Download Pdf"})})}):""]})}},7863:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(6213),s=n(1944),i=n(790),r=n(8402);const a=o.A.create({baseURL:s.A.base_url,timeout:1e4,headers:{Accept:"application/json, application/octet-stream"},withCredentials:!1});let l=!1,d=[];a.interceptors.request.use((e=>{const t=localStorage.getItem(i.o.localStorageKeys.token);return t&&(e.headers.Authorization="Bearer ".concat(t),e.withCredentials=!0),e}),(e=>Promise.reject(e))),a.interceptors.response.use((e=>e),(e=>{const{config:t,response:n}=e,o=t;if("Token has expired"===n.data.message){if(!l){l=!0;const t=localStorage.getItem(i.o.localStorageKeys.refresh_token);return a.post(s.A.refresh_token_url,{refreshToken:t}).then((e=>{var t;let{data:n}=e;const s=null===n||void 0===n||null===(t=n.payload)||void 0===t?void 0:t.accessToken;var r;return localStorage.setItem(i.o.localStorageKeys.token,s),l=!1,r=s,d.forEach((e=>e(r))),d=[],o.headers.Authorization="Bearer ".concat(s),a(o)})).catch((t=>(console.error("Failed to refresh token:",t),(0,r.sw)(),window.location.href=s.A.login_path,Promise.reject(e))))}return new Promise((e=>{var t;t=t=>{o.headers.Authorization="Bearer ".concat(t),e(a(o))},d.push(t)}))}return"Token is invalid"===n.data.message&&((0,r.sw)(),window.location.href=s.A.login_path),Promise.reject(e)}));const c=a},4356:(e,t,n)=>{n.d(t,{f1:()=>r,uT:()=>i});var o=n(1036);n(2342);const s={position:"top-center",closeButton:!1,progress:!1},i=e=>{o.oR.success(e,s)},r=e=>{o.oR.error(e,s)}},6494:(e,t,n)=>{n.d(t,{A:()=>h});var o=n(8168),s=n(8587),i=n(5043),r=n(8387),a=n(8610),l=n(4535),d=n(8206),c=n(2532),u=n(2372);function x(e){return(0,u.Ay)("MuiCardContent",e)}(0,c.A)("MuiCardContent",["root"]);var v=n(579);const p=["className","component"],m=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),h=i.forwardRef((function(e,t){const n=(0,d.b)({props:e,name:"MuiCardContent"}),{className:i,component:l="div"}=n,c=(0,s.A)(n,p),u=(0,o.A)({},n,{component:l}),h=(e=>{const{classes:t}=e;return(0,a.A)({root:["root"]},x,t)})(u);return(0,v.jsx)(m,(0,o.A)({as:l,className:(0,r.A)(h.root,i),ownerState:u,ref:t},c))}))},2110:(e,t,n)=>{n.d(t,{A:()=>y});var o=n(8168),s=n(8587),i=n(5043),r=n(8387),a=n(8610),l=n(4535),d=n(8206),c=n(3336),u=n(2532),x=n(2372);function v(e){return(0,x.Ay)("MuiCard",e)}(0,u.A)("MuiCard",["root"]);var p=n(579);const m=["className","raised"],h=(0,l.Ay)(c.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),y=i.forwardRef((function(e,t){const n=(0,d.b)({props:e,name:"MuiCard"}),{className:i,raised:l=!1}=n,c=(0,s.A)(n,m),u=(0,o.A)({},n,{raised:l}),x=(e=>{const{classes:t}=e;return(0,a.A)({root:["root"]},v,t)})(u);return(0,p.jsx)(h,(0,o.A)({className:(0,r.A)(x.root,i),elevation:l?8:void 0,ref:t,ownerState:u},c))}))}}]);
//# sourceMappingURL=7457.aa65a8c4.chunk.js.map